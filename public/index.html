<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯é‘«çš„æ’­å®¢ - ä¸ªäººæ’­å®¢ç½‘ç«™</title>
    <link rel="icon" type="image/jpeg" href="Slash Command Prompter.JPG">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 300;
            background: #0A0A0B;
            min-height: 100vh;
            color: #E5E5E7;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* DARKé£æ ¼èƒŒæ™¯åŠ¨ç”» */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            animation: perlinNoise 45s ease-in-out infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes perlinNoise {
            0%, 100% {
                transform: rotate(0deg) scale(1);
                opacity: 0.3;
            }
            50% {
                transform: rotate(180deg) scale(1.1);
                opacity: 0.5;
            }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px;
        }

        .header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px;
            margin-bottom: 50px;
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 35px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }

        .header-avatar {
            width: 150px;
            height: 150px;
            flex-shrink: 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .header-avatar:hover {
            transform: translateY(-5px);
        }

        /* å¯é‘«ä¸ªäººå¡ç‰‡æ ·å¼ */
        .person-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .person-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 
                0 12px 35px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* å›¾ç‰‡å®¹å™¨ */
        .person-image {
            width: 100%;
            aspect-ratio: 1;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
            border-radius: 8px;
        }

        /* åº•éƒ¨æ¸å˜é®ç½© */
        .person-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.3) 100%);
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        /* å›¾ç‰‡æ ·å¼ */
        .person-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: contrast(1.1) brightness(1.1);
            transition: all 0.5s ease;
        }

        /* æ‚¬åœæ—¶çš„å›¾ç‰‡æ•ˆæœ */
        .person-card:hover .person-image img {
            filter: contrast(1.2) brightness(1.2);
            transform: scale(1.03);
        }

        /* æ‚¬åœæ—¶é®ç½©æ¶ˆå¤± */
        .person-card:hover .person-image::after {
            opacity: 0;
        }

        /* åå­—æ ·å¼ */
        .person-name {
            color: #E5E5E7;
            font-size: 16px;
            letter-spacing: 0.35em;
            text-align: center;
            padding: 8px 0;
            font-weight: 300;
            text-transform: uppercase;
        }

        .header-info h1 {
            font-size: 2.8rem;
            margin: 0 0 12px 0;
            color: #F5F5DC;
            font-weight: 300;
            letter-spacing: -0.02em;
            text-shadow: 0 0 2px rgba(245, 245, 220, 0.4);
        }

        .header-info p {
            font-size: 1.2rem;
            color: rgba(229, 229, 231, 0.7);
            margin: 0 0 18px 0;
            font-weight: 300;
        }

        .header-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(229, 229, 231, 0.8);
            font-size: 0.9rem;
            font-weight: 300;
        }

        .stat-item i {
            color: rgba(255, 255, 255, 0.8);
        }

        .add-podcast-section {
            margin-bottom: 20px;
            text-align: center;
        }

        .add-podcast-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.6));
            color: #E5E5E7;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 400;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 
                0 6px 20px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.4);
            position: relative;
            overflow: hidden;
        }

        .add-podcast-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .add-podcast-btn:hover {
            transform: translateY(-3px);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.8));
            box-shadow: 
                0 8px 25px rgba(255, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            color: #E5E5E7;
            text-decoration: none;
        }

        .add-podcast-btn:hover::before {
            transform: translateX(100%);
        }

        .admin-toggle-section {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .admin-toggle-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: rgba(229, 229, 231, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .admin-toggle-btn:hover {
            background: rgba(0, 0, 0, 0.7);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            color: #E5E5E7;
        }

        .admin-toggle-btn.active {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.6));
            border-color: rgba(255, 255, 255, 0.4);
            color: #E5E5E7;
            box-shadow: 
                0 6px 20px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* ç®¡ç†å‘˜æ¨¡å¼ä¸‹çš„æ›´å¤šé€‰é¡¹æŒ‰é’® */
        .admin-mode .more-btn {
            display: flex;
        }

        .more-btn {
            display: none;
        }

        .website-link:hover {
            color: rgba(255, 255, 255, 1) !important;
            transform: translateY(-1px);
        }



        .podcasts-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .podcasts-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #E5E5E7;
            font-weight: 300;
            display: flex;
            align-items: center;
            gap: 15px;
            letter-spacing: -0.01em;
        }

        .section-title i {
            color: rgba(255, 255, 255, 0.8);
        }

        .tab-nav {
            display: flex;
            gap: 0;
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: rgba(229, 229, 231, 0.6);
            font-size: 0.95rem;
            font-weight: 300;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.2);
            color: #E5E5E7;
            font-weight: 400;
            box-shadow: 
                0 4px 12px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(229, 229, 231, 0.8);
        }

        .podcast-details {
            padding: 40px 0;
        }

        .details-content {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .podcast-list {
            display: grid;
            gap: 25px;
        }

        .podcast-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 25px;
            position: relative;
            overflow: hidden;
        }

        .podcast-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .podcast-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .podcast-item:hover::before {
            opacity: 1;
        }

        .podcast-cover {
            width: 75px;
            height: 75px;
            border-radius: 12px;
            background: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000000;
            font-size: 1.8rem;
            font-weight: 400;
            flex-shrink: 0;
            border: none;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .podcast-content {
            flex: 1;
            min-width: 0;
        }

        .podcast-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .podcast-title {
            font-size: 1.4rem;
            font-weight: 400;
            color: #E5E5E7;
            margin: 0 0 8px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            letter-spacing: -0.01em;
        }

        .podcast-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .podcast-date {
            color: rgba(229, 229, 231, 0.5);
            font-size: 0.85rem;
            font-weight: 300;
        }

        .podcast-duration {
            color: rgba(229, 229, 231, 0.7);
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 300;
        }

        .podcast-stats {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.85rem;
            color: rgba(229, 229, 231, 0.5);
            font-weight: 300;
        }

        .podcast-stats i {
            color: rgba(255, 255, 255, 0.6);
        }

        .podcast-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .podcast-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .play-btn {
            background: #FFFFFF;
            color: #333333;
            border: none;
            border-radius: 50%;
            width: 52px;
            height: 52px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .play-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .play-btn:hover {
            background: #FFFFFF;
            transform: scale(1.05);
            box-shadow: 
                0 6px 20px rgba(255, 255, 255, 0.6);
        }

        .play-btn:hover::before {
            transform: translateX(100%);
        }

        .more-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(229, 229, 231, 0.6);
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .more-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            color: rgba(229, 229, 231, 0.9);
            transform: scale(1.05);
        }

        .delete-btn {
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .delete-btn:hover {
            background: #c53030;
        }

        .audio-player {
            flex: 1;
            margin: 0 15px;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å…¨å±æ’­æ”¾å™¨æ ·å¼ */
        .fullscreen-player {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 40px 20px;
        }

        .fullscreen-player.active {
            display: flex;
        }

        .player-header {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
        }

        .player-cover {
            width: 350px;
            height: 350px;
            border-radius: 20px;
            background: linear-gradient(135deg, #ff7b7b, #667eea);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4.5rem;
            color: white;
            margin-bottom: 50px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .player-info {
            text-align: center;
            margin-bottom: 40px;
        }

        .player-title {
            font-size: 2.4rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .player-subtitle {
            font-size: 1.2rem;
            color: #ffd700;
            opacity: 0.9;
        }

        .player-progress {
            width: 100%;
            max-width: 400px;
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background: #ffd700;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-time {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .play-control {
            background: white;
            color: #333;
            width: 80px;
            height: 80px;
            font-size: 2rem;
        }

        .play-control:hover {
            background: #f0f0f0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 15px;
            }
            
            .upload-section,
            .podcasts-section {
                padding: 20px;
            }
            
            .podcast-controls {
                flex-wrap: wrap;
            }

            .player-cover {
                width: 250px;
                height: 250px;
                font-size: 3rem;
            }

            .player-title {
                font-size: 1.5rem;
            }

            .player-controls {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-avatar">
                <img src="å¯é‘«.jpg" alt="å¯é‘«" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
            </div>
            <div class="header-info">
                <h1>å¯é‘«çš„æ’­å®¢ ğŸ§</h1>
                <p>Keep iterate.</p>
                <p style="margin: 8px 0; font-size: 0.9rem;">
                    å…³äºæˆ‘ï¼š<a href="https://keepiterate.netlify.app/" target="_blank" class="website-link" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all 0.3s ease; margin-left: 6px;">
                        <i class="fas fa-globe" style="margin-right: 6px;"></i>keepiterate.netlify.app
                    </a>
                </p>
                <p style="margin: 8px 0; font-size: 0.9rem;">
                    è”ç³»æˆ‘ï¼š<span style="color: rgba(255, 255, 255, 0.8); margin-left: 6px;">
                        <i class="fab fa-weixin" style="margin-right: 6px; color: #07C160;"></i>ymx94yyds
                    </span>
                </p>
                <div class="header-stats">
                    <div class="stat-item">
                        <i class="fas fa-play-circle"></i>
                        <span id="totalEpisodes">0</span> æœŸ
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-heart"></i>
                        <span>å·²è®¢é˜…</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ·»åŠ æ’­å®¢æŒ‰é’® - ä»…ç®¡ç†å‘˜å¯è§ -->
        <div class="add-podcast-section" id="adminSection" style="display: none;">
            <a href="/upload" class="add-podcast-btn">
                <i class="fas fa-plus"></i>
                <span>æ·»åŠ æ–°æ’­å®¢</span>
            </a>
        </div>

        <!-- ç®¡ç†å‘˜ç™»å½•æŒ‰é’® -->
        <div class="admin-toggle-section" id="adminToggle">
            <button class="admin-toggle-btn" onclick="app.toggleAdminMode()">
                <i class="fas fa-key"></i>
                <span>ç®¡ç†å‘˜æ¨¡å¼</span>
            </button>
        </div>

        <div class="podcasts-section">
            <h2 class="section-title">
                <i class="fas fa-list"></i>
                æ’­å®¢åˆ—è¡¨
            </h2>
            <div class="tab-nav">
                <button class="tab-btn active" onclick="app.switchTab('episodes')">å•é›†æ›´æ–°</button>
                <button class="tab-btn" onclick="app.switchTab('details')">èŠ‚ç›®è¯¦æƒ…</button>
            </div>
            <div id="messageContainer"></div>
            <div id="podcastsList" class="podcast-list">
                <div class="loading">
                    <div class="spinner"></div>
                    æ­£åœ¨åŠ è½½æ’­å®¢åˆ—è¡¨...
                </div>
            </div>
            <div id="podcastDetails" class="podcast-details" style="display: none;">
                <div class="details-content">
                    <h3 style="color: #F5F5DC; margin-bottom: 20px; font-size: 1.5rem;">å…³äºè¿™ä¸ªæ’­å®¢</h3>
                    <p style="color: rgba(229, 229, 231, 0.8); line-height: 1.6; font-size: 1.1rem; text-align: center; margin: 40px 0;">
                        ä»…ä»¥æ­¤çŒ®ç»™æˆé•¿çš„äºº
                    </p>
                    <p style="color: rgba(229, 229, 231, 0.6); line-height: 1.6; font-size: 0.95rem; text-align: center; margin: 20px 0;">
                        è®°å½•æ€è€ƒï¼Œåˆ†äº«æˆé•¿ï¼ŒKeep iterate.
                    </p>
                    <div style="border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 20px; margin-top: 30px;">
                        <p style="color: rgba(229, 229, 231, 0.6); font-size: 0.9rem; text-align: center;">
                            åœ¨è¿™é‡Œåˆ†äº«æ€è€ƒã€æ„Ÿæ‚Ÿå’Œæˆé•¿çš„æ•…äº‹
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å…¨å±æ’­æ”¾å™¨ -->
    <div class="fullscreen-player" id="fullscreenPlayer">
        <div class="player-header">
            <button class="back-btn" onclick="app.closeFullscreenPlayer()">
                <i class="fas fa-chevron-down"></i>
            </button>
            <div style="display: flex; gap: 20px;">
                <button class="back-btn" onclick="app.toggleFavorite()">
                    <i class="fas fa-star" style="opacity: 0.7;"></i>
                </button>
                <button class="back-btn" onclick="app.shareCurrentPodcast()">
                    <i class="fas fa-share" style="opacity: 0.7;"></i>
                </button>
            </div>
        </div>
        
        <div class="player-cover" id="playerCover">
            <img src="å¯é‘«.jpg" alt="å¯é‘«" style="width: 100%; height: 100%; object-fit: cover; border-radius: 20px;">
        </div>
        
        <div class="player-info">
            <div class="player-title" id="playerTitle">æ’­å®¢æ ‡é¢˜</div>
            <div class="player-subtitle">å¯é‘«çš„æ’­å®¢</div>
            <div class="player-description" id="playerDescription" style="
                color: #ccc;
                font-size: 0.9rem;
                margin-top: 10px;
                line-height: 1.4;
                max-width: 350px;
                display: none;
            "></div>
        </div>
        
        <div class="player-progress">
            <div class="progress-bar" onclick="app.seekAudio(event)">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-time">
                <span id="currentTime">00:00</span>
                <span id="totalTime">00:00</span>
            </div>
        </div>
        
        <div class="player-controls">
            <button class="control-btn" onclick="app.previousTrack()">
                <i class="fas fa-step-backward"></i>
            </button>
            <button class="control-btn" onclick="app.skipBackward()">
                <i class="fas fa-backward" style="font-size: 1rem;"></i>
                <span style="font-size: 0.7rem; margin-left: 2px;">15</span>
            </button>
            <button class="control-btn play-control" id="mainPlayBtn" onclick="app.toggleMainPlay()">
                <i class="fas fa-play" id="mainPlayIcon"></i>
            </button>
            <button class="control-btn" onclick="app.skipForward()">
                <span style="font-size: 0.7rem; margin-right: 2px;">30</span>
                <i class="fas fa-forward" style="font-size: 1rem;"></i>
            </button>
            <button class="control-btn" onclick="app.nextTrack()">
                <i class="fas fa-step-forward"></i>
            </button>
        </div>
        
        <audio id="mainAudio" style="display: none;"></audio>
    </div>

    <script>
        class PodcastApp {
            constructor() {
                this.currentPodcast = null;
                this.mainAudio = null;
                this.allPodcasts = [];
                this.isAdminMode = localStorage.getItem('adminMode') === 'true';
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadPodcasts();
                this.mainAudio = document.getElementById('mainAudio');
                this.setupAudioEvents();
                this.updateAdminUI();
            }

            setupAudioEvents() {
                if (!this.mainAudio) return;
                
                this.mainAudio.addEventListener('timeupdate', () => {
                    this.updateProgress();
                });
                
                this.mainAudio.addEventListener('loadedmetadata', () => {
                    this.updateDuration();
                });
                
                this.mainAudio.addEventListener('ended', () => {
                    this.onAudioEnded();
                });
            }

            bindEvents() {
                // ä¸»é¡µä¸éœ€è¦ä¸Šä¼ ç›¸å…³çš„äº‹ä»¶ç»‘å®š
            }

            switchTab(tab) {
                // ç§»é™¤æ‰€æœ‰activeç±»
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
                event.target.classList.add('active');
                
                // æ˜¾ç¤º/éšè—å¯¹åº”å†…å®¹
                if (tab === 'episodes') {
                    document.getElementById('podcastsList').style.display = 'grid';
                    document.getElementById('podcastDetails').style.display = 'none';
                } else if (tab === 'details') {
                    document.getElementById('podcastsList').style.display = 'none';
                    document.getElementById('podcastDetails').style.display = 'block';
                }
            }



            async loadPodcasts() {
                try {
                    const response = await fetch('/api/podcasts');
                    const podcasts = await response.json();
                    this.renderPodcasts(podcasts);
                } catch (error) {
                    document.getElementById('podcastsList').innerHTML = 
                        '<div class="loading">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                }
            }

            renderPodcasts(podcasts) {
                const container = document.getElementById('podcastsList');
                
                // ä¿å­˜æ’­å®¢åˆ—è¡¨æ•°æ®
                this.allPodcasts = podcasts;
                
                // æ›´æ–°æ€»é›†æ•°
                document.getElementById('totalEpisodes').textContent = podcasts.length;
                
                if (podcasts.length === 0) {
                    container.innerHTML = `
                        <div class="loading">
                            <i class="fas fa-microphone" style="font-size: 3rem; margin-bottom: 20px; color: #ccc;"></i>
                            <div>è¿˜æ²¡æœ‰æ’­å®¢ï¼Œå¿«ä¸Šä¼ ç¬¬ä¸€ä¸ªå§ï¼</div>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = podcasts.map((podcast, index) => `
                    <div class="podcast-item">
                        <div class="podcast-cover">
                            ${podcasts.length - index}
                        </div>
                        <div class="podcast-content">
                            <div class="podcast-title">${podcast.title}</div>
                            <div class="podcast-meta">
                                <span class="podcast-date">${new Date(podcast.created_at).toLocaleDateString('zh-CN', {month: '2-digit', day: '2-digit'})}</span>
                            </div>
                            ${podcast.description ? `<div class="podcast-description" style="font-size: 0.85rem; color: rgba(229, 229, 231, 0.6); margin-top: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${podcast.description}</div>` : ''}
                            <audio style="display: none;" data-filename="${podcast.filename}">
                                <source src="${podcast.file_url || '/uploads/' + podcast.filename}" type="audio/mpeg">
                            </audio>
                        </div>
                        <div class="podcast-controls">
                            <button class="play-btn" onclick="app.openFullscreenPlayer('${podcast.filename}', '${podcast.title}', ${podcasts.length - index})">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="more-btn" onclick="app.showMoreOptions(${podcast.id})" style="display: ${this.isAdminMode ? 'flex' : 'none'};">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            togglePlay(filename, button) {
                const podcastItem = button.closest('.podcast-item');
                const audio = podcastItem.querySelector('audio');
                const icon = button.querySelector('i');
                
                if (audio.paused) {
                    // æš‚åœå…¶ä»–æ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘
                    document.querySelectorAll('audio').forEach(a => {
                        if (a !== audio && !a.paused) {
                            a.pause();
                            const otherBtn = a.closest('.podcast-item').querySelector('.play-btn i');
                            otherBtn.className = 'fas fa-play';
                        }
                    });
                    
                    audio.play();
                    icon.className = 'fas fa-pause';
                } else {
                    audio.pause();
                    icon.className = 'fas fa-play';
                }
                
                audio.addEventListener('ended', () => {
                    icon.className = 'fas fa-play';
                });
            }

            openFullscreenPlayer(filename, title, episodeNumber) {
                // æŸ¥æ‰¾å½“å‰æ’­å®¢çš„å®Œæ•´ä¿¡æ¯
                const podcastData = this.allPodcasts.find(p => p.title === title);
                this.currentPodcast = { 
                    filename, 
                    title, 
                    episodeNumber,
                    id: podcastData ? podcastData.id : null,
                    description: podcastData ? podcastData.description : null
                };
                
                // æ›´æ–°æ’­æ”¾å™¨ä¿¡æ¯
                document.getElementById('playerTitle').textContent = title;
                document.getElementById('playerCover').innerHTML = episodeNumber;
                
                // æ˜¾ç¤ºæ’­å®¢æè¿°
                const descriptionEl = document.getElementById('playerDescription');
                if (this.currentPodcast.description && this.currentPodcast.description.trim()) {
                    descriptionEl.textContent = this.currentPodcast.description;
                    descriptionEl.style.display = 'block';
                } else {
                    descriptionEl.style.display = 'none';
                }
                
                // è®¾ç½®éŸ³é¢‘æºï¼ˆä½¿ç”¨å·²æœ‰çš„podcastDataå˜é‡ï¼‰
                this.mainAudio.src = podcastData?.file_url || `/uploads/${filename}`;
                
                // æ˜¾ç¤ºå…¨å±æ’­æ”¾å™¨
                document.getElementById('fullscreenPlayer').classList.add('active');
                
                // è‡ªåŠ¨æ’­æ”¾
                this.mainAudio.play();
                document.getElementById('mainPlayIcon').className = 'fas fa-pause';
            }

            closeFullscreenPlayer() {
                document.getElementById('fullscreenPlayer').classList.remove('active');
                this.mainAudio.pause();
                document.getElementById('mainPlayIcon').className = 'fas fa-play';
            }

            toggleMainPlay() {
                const icon = document.getElementById('mainPlayIcon');
                
                if (this.mainAudio.paused) {
                    this.mainAudio.play();
                    icon.className = 'fas fa-pause';
                } else {
                    this.mainAudio.pause();
                    icon.className = 'fas fa-play';
                }
            }

            updateProgress() {
                if (!this.mainAudio.duration) return;
                
                const progress = (this.mainAudio.currentTime / this.mainAudio.duration) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                // æ›´æ–°æ—¶é—´æ˜¾ç¤º
                document.getElementById('currentTime').textContent = this.formatTime(this.mainAudio.currentTime);
            }

            updateDuration() {
                if (this.mainAudio.duration) {
                    document.getElementById('totalTime').textContent = this.formatTime(this.mainAudio.duration);
                }
            }

            seekAudio(event) {
                const progressBar = event.currentTarget;
                const rect = progressBar.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const width = rect.width;
                const percentage = clickX / width;
                
                if (this.mainAudio.duration) {
                    this.mainAudio.currentTime = percentage * this.mainAudio.duration;
                }
            }

            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            onAudioEnded() {
                document.getElementById('mainPlayIcon').className = 'fas fa-play';
                document.getElementById('progressFill').style.width = '0%';
                document.getElementById('currentTime').textContent = '00:00';
            }

            skipBackward() {
                if (this.mainAudio) {
                    this.mainAudio.currentTime = Math.max(0, this.mainAudio.currentTime - 15);
                    this.showSkipFeedback('-15ç§’');
                }
            }

            skipForward() {
                if (this.mainAudio && this.mainAudio.duration) {
                    this.mainAudio.currentTime = Math.min(this.mainAudio.duration, this.mainAudio.currentTime + 30);
                    this.showSkipFeedback('+30ç§’');
                }
            }

            previousTrack() {
                if (!this.currentPodcast || this.allPodcasts.length <= 1) {
                    this.showSkipFeedback('æ²¡æœ‰ä¸Šä¸€é¦–');
                    return;
                }
                
                // æ‰¾åˆ°å½“å‰æ’­å®¢åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®
                const currentIndex = this.allPodcasts.findIndex(p => p.id === this.currentPodcast.id);
                if (currentIndex === -1) return;
                
                // è·å–ä¸Šä¸€é¦–ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€é¦–ï¼Œåˆ™è·³åˆ°æœ€åä¸€é¦–ï¼‰
                const prevIndex = currentIndex === this.allPodcasts.length - 1 ? 0 : currentIndex + 1;
                const prevPodcast = this.allPodcasts[prevIndex];
                
                // æ’­æ”¾ä¸Šä¸€é¦–
                this.openFullscreenPlayer(
                    prevPodcast.filename, 
                    prevPodcast.title, 
                    this.allPodcasts.length - prevIndex
                );
                this.showSkipFeedback('ä¸Šä¸€é¦–');
            }

            nextTrack() {
                if (!this.currentPodcast || this.allPodcasts.length <= 1) {
                    this.showSkipFeedback('æ²¡æœ‰ä¸‹ä¸€é¦–');
                    return;
                }
                
                // æ‰¾åˆ°å½“å‰æ’­å®¢åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®
                const currentIndex = this.allPodcasts.findIndex(p => p.id === this.currentPodcast.id);
                if (currentIndex === -1) return;
                
                // è·å–ä¸‹ä¸€é¦–ï¼ˆå¦‚æœæ˜¯æœ€åä¸€é¦–ï¼Œåˆ™è·³åˆ°ç¬¬ä¸€é¦–ï¼‰
                const nextIndex = currentIndex === 0 ? this.allPodcasts.length - 1 : currentIndex - 1;
                const nextPodcast = this.allPodcasts[nextIndex];
                
                // æ’­æ”¾ä¸‹ä¸€é¦–
                this.openFullscreenPlayer(
                    nextPodcast.filename, 
                    nextPodcast.title, 
                    this.allPodcasts.length - nextIndex
                );
                this.showSkipFeedback('ä¸‹ä¸€é¦–');
            }

            showSkipFeedback(text) {
                // åˆ›å»ºä¸´æ—¶çš„åé¦ˆæç¤º
                const feedback = document.createElement('div');
                feedback.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0,0,0,0.7);
                    color: white;
                    padding: 12px 24px;
                    border-radius: 25px;
                    font-size: 1rem;
                    z-index: 1001;
                    pointer-events: none;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                feedback.textContent = text;
                document.body.appendChild(feedback);
                
                // æ˜¾ç¤ºåŠ¨ç”»
                setTimeout(() => feedback.style.opacity = '1', 10);
                
                // è‡ªåŠ¨æ¶ˆå¤±
                setTimeout(() => {
                    feedback.style.opacity = '0';
                    setTimeout(() => document.body.removeChild(feedback), 300);
                }, 1000);
            }

            async shareCurrentPodcast() {
                if (!this.currentPodcast || !this.currentPodcast.id) {
                    this.showMessage('æ— æ³•è·å–æ’­å®¢ä¿¡æ¯', 'error');
                    return;
                }

                try {
                    const response = await fetch(`/api/podcasts/${this.currentPodcast.id}/share`);
                    const result = await response.json();
                    
                    if (response.ok) {
                        // å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿
                        if (navigator.clipboard) {
                            await navigator.clipboard.writeText(result.shareUrl);
                            this.showSkipFeedback('åˆ†äº«é“¾æ¥å·²å¤åˆ¶');
                        } else {
                            // é™çº§æ–¹æ¡ˆï¼šæ˜¾ç¤ºé“¾æ¥è®©ç”¨æˆ·æ‰‹åŠ¨å¤åˆ¶
                            this.showShareDialog(result.shareUrl, result.title);
                        }
                    } else {
                        this.showMessage(result.error || 'è·å–åˆ†äº«é“¾æ¥å¤±è´¥', 'error');
                    }
                } catch (error) {
                    this.showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•', 'error');
                }
            }

            showShareDialog(shareUrl, title) {
                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.8);
                    z-index: 1002;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 20px;
                `;
                
                dialog.innerHTML = `
                    <div style="
                        background: white;
                        border-radius: 15px;
                        padding: 30px;
                        max-width: 400px;
                        width: 100%;
                        text-align: center;
                    ">
                        <h3 style="margin: 0 0 20px 0; color: #333;">åˆ†äº«æ’­å®¢</h3>
                        <p style="color: #666; margin-bottom: 20px;">${title}</p>
                        <input type="text" value="${shareUrl}" readonly style="
                            width: 100%;
                            padding: 12px;
                            border: 2px solid #e1e5e9;
                            border-radius: 8px;
                            margin-bottom: 20px;
                            font-size: 14px;
                        " onclick="this.select()">
                        <div style="display: flex; gap: 10px;">
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                                flex: 1;
                                padding: 12px;
                                border: 2px solid #e1e5e9;
                                background: white;
                                border-radius: 8px;
                                cursor: pointer;
                            ">å–æ¶ˆ</button>
                            <button onclick="
                                const input = this.parentElement.parentElement.querySelector('input');
                                input.select();
                                document.execCommand('copy');
                                app.showSkipFeedback('é“¾æ¥å·²å¤åˆ¶');
                                this.parentElement.parentElement.parentElement.remove();
                            " style="
                                flex: 1;
                                padding: 12px;
                                border: none;
                                background: #667eea;
                                color: white;
                                border-radius: 8px;
                                cursor: pointer;
                            ">å¤åˆ¶é“¾æ¥</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(dialog);
            }

            toggleFavorite() {
                // åˆ‡æ¢æ”¶è—çŠ¶æ€çš„è§†è§‰åé¦ˆ
                const starBtn = document.querySelector('.player-header .fa-star');
                if (starBtn.style.opacity === '1') {
                    starBtn.style.opacity = '0.7';
                    this.showSkipFeedback('å–æ¶ˆæ”¶è—');
                } else {
                    starBtn.style.opacity = '1';
                    this.showSkipFeedback('å·²æ”¶è—');
                }
            }

            showMoreOptions(id) {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ’­å®¢å—ï¼Ÿ')) {
                    this.deletePodcast(id);
                }
            }

            async deletePodcast(id) {
                
                try {
                    const response = await fetch(`/api/podcasts/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        this.showMessage('æ’­å®¢åˆ é™¤æˆåŠŸ', 'success');
                        this.loadPodcasts();
                    } else {
                        this.showMessage(result.error || 'åˆ é™¤å¤±è´¥', 'error');
                    }
                } catch (error) {
                    this.showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•', 'error');
                }
            }

            showMessage(message, type) {
                const container = document.getElementById('messageContainer');
                container.innerHTML = `<div class="message ${type}">${message}</div>`;
                
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }

            toggleAdminMode() {
                if (!this.isAdminMode) {
                    // ç®€å•çš„å¯†ç éªŒè¯
                    const password = prompt('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :');
                    if (password === 'admin123') { // ä½ å¯ä»¥æ”¹æˆä½ æƒ³è¦çš„å¯†ç 
                        this.isAdminMode = true;
                        localStorage.setItem('adminMode', 'true');
                        this.updateAdminUI();
                        this.showSkipFeedback('ç®¡ç†å‘˜æ¨¡å¼å·²å¼€å¯');
                    } else if (password !== null) {
                        this.showSkipFeedback('å¯†ç é”™è¯¯');
                    }
                } else {
                    this.isAdminMode = false;
                    localStorage.setItem('adminMode', 'false');
                    this.updateAdminUI();
                    this.showSkipFeedback('ç®¡ç†å‘˜æ¨¡å¼å·²å…³é—­');
                }
            }

            updateAdminUI() {
                const adminSection = document.getElementById('adminSection');
                const adminToggle = document.getElementById('adminToggle');
                const adminToggleBtn = adminToggle.querySelector('.admin-toggle-btn');
                
                if (this.isAdminMode) {
                    // æ˜¾ç¤ºç®¡ç†å‘˜åŠŸèƒ½
                    adminSection.style.display = 'block';
                    adminToggleBtn.classList.add('active');
                    adminToggleBtn.innerHTML = '<i class="fas fa-user-shield"></i><span>ç®¡ç†å‘˜æ¨¡å¼</span>';
                    document.body.classList.add('admin-mode');
                } else {
                    // éšè—ç®¡ç†å‘˜åŠŸèƒ½
                    adminSection.style.display = 'none';
                    adminToggleBtn.classList.remove('active');
                    adminToggleBtn.innerHTML = '<i class="fas fa-key"></i><span>ç®¡ç†å‘˜æ¨¡å¼</span>';
                    document.body.classList.remove('admin-mode');
                }
                
                // ç¡®ä¿æ›´å¤šæŒ‰é’®çš„æ˜¾ç¤ºçŠ¶æ€æ­£ç¡®
                const moreButtons = document.querySelectorAll('.more-btn');
                moreButtons.forEach(btn => {
                    btn.style.display = this.isAdminMode ? 'flex' : 'none';
                });
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        const app = new PodcastApp();
    </script>
</body>
</html>
